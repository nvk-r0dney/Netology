# Домашнее задание к занятию 4. «Оркестрация группой Docker-контейнеров на примере Docker Compose»

### Выполнил студент группы DevOps-25 Шаповалов Кирилл


> 01. Задача 1. Создайте собственный образ любой операционной системы (например ubuntu-20.04) с помощью Packer (инструкция).

Создал json файл для создания образа:

<img src="img/01-centos-packer.png" width=750px>

Проверка на валидность пройдена:

<img src="img/01-config-valid.png" width=750px>

Командой `packer build centos.json` запустил создание образа. Образ появился в консоли Yandex.Cloud:

<img src="img/01-my-image.png" width=750px>


> 02. Задача 2.

2.1. Создайте вашу первую виртуальную машину в YandexCloud с помощью web-интерфейса YandexCloud.

В интерфейсе задал необходимые параметры, машина создается по принципу "Далее, Далее, Готово":

<img src="img/02-first-vm-by-web.png" width=750px>

2.2.* Создайте вашу первую виртуальную машину в YandexCloud с помощью Terraform (вместо использования веб-интерфейса YandexCloud).

Листинг файла Terraform прикладываю к файлу readme (main.tf). Штука очень классная, мне понравилась, раньше опыта общения с ней не было, сейчас наверстываю :)

Частичный вывод команды `terraform apply`:

<img src="img/02-terraform-apply-0.png" width=750px>

<img src="img/02-terraform-apply-1.png" width=750px>

Ну и сама машина в интерфейсе Yandex.Cloud

<img src="img/02-terraform-node.png" width=750px>


> 03. Задача 3. С помощью Ansible и Docker Compose разверните на виртуальной машине из предыдущего задания систему мониторинга на основе Prometheus/Grafana.

Так как большого практического опыта общения с Ansible у меня тоже не было, помучался с данной задачей достаточно приличное время... Но оно того стоило. Итоговый листинг файла `playbook.yml` прикладываю к заданию. 

Результат выполнения плейбука ниже:

<img src="img/03-ansible-playbook.png" width=750px>

Проверяем, что все контейнеры стартанули внутри нашей машины в облаке:

<img src="img/03-docker-ps.png" width=750px>

Базовая система мониторинга готова.


> 04. Задача 4. Проверка работы системы мониторинга.

Подождав небольшое количество времени, проверяю в браузере:

<img src="img/04-grafana.png" width=750px>

И второй дашборд:

<img src="img/04-grafana-1.png" width=750px>

В пятой задаче особо сложного ничего нет, добавляется просто еще одна нода в файле Прометеуса, а на саму ноду нужно например поставить node_exporter. Но уже ниасилил выполнить практически :)