# Домашнее задание к занятию «Введение в микросервисы»

## Выполнил студент группы DevOps-25 Шаповалов Кирилл

<br />

Задача
------

```
Руководство крупного интернет-магазина, у которого постоянно растёт пользовательская база и количество заказов,
рассматривает возможность переделки своей внутренней ИТ-системы на основе микросервисов.

Вас пригласили в качестве консультанта для оценки целесообразности перехода на микросервисную архитектуру.

Опишите, какие выгоды может получить компания от перехода на микросервисную архитектуру и 
какие проблемы нужно решить в первую очередь.
```

Решение
-------

Учитывая, что речь идет про крупный интернет-магазин, который созрел для перехода на микросервисную архитектуру, значит уже в наличии следующие предпосылки к данному переходу:

* монолитное приложение, разросшееся до размеров Римской Империи в лучшие ее времена;
* в связи с п.1 - обновление приложения крайне затруднено и практически всегда связано с привлечением большого количества людей;
* если все же обновление происходит - оно всегда связано с остановкой предоставления сервиса, зачастую надолго;
* если обновления проблемные и во время обновления что-то ломается - это ведет к еще большей остановке предоставления сервиса и привлечению еще большего числа людей к исправлению ошибок.

Далее я изложу сугубо свою точку зрения, так как я вижу это на основе того, что я делал сам или видел у других.

При переходе к микросервисной архитектуре в первую очередь следует решить ОПК-проблемы (я их так называю :))

**Организационные** - нужно разбить большую команду монолитного приложения на продуктовые (сервисные) команды, построить взаимодействие между ними, внедрить регламенты и методологии новой работы, потому что методика работы над монолитным приложением и над микросервисным - различается кардинально.

**Психологические** - да-да, как бы это странно ни звучало, но далеко не всегда текущая команда или отдельные ее участники психологически готовы воспринимать новые технологии. Из личного опыта - видел людей, которые напрямую говорят: "Ой вот все эти ваше докеры-куберы, не-не, это все выдумки сатаны и это все не нужно". Потому что для людей поменяется очень многое - алгоритмы работы, структура, взаимодействие между командами, технологический стек.

**Квалификационные** - текущей команде может банально не хватить квалификации для работы с новой микросервисной архитектурой, а учитывая психологическую составляющую - команда может быть и не готова учиться новому. 

В этих случаях руководству следует обратить внимание на то, что скорее всего от некоторых членов старой команды, вероятно, придется избавиться. Либо же пойти на увеличение бюджета и нанимать дополнительных сотрудников со знаниями в новых технологиях, способных и готовых эти знания передавать текущим сотрудникам. Например, такие люди ставятся лидами команд, где и будут учить свои команды работать по новому.

Непосредственно с изменением организационной структуры связано **определение контуров** каждого сервиса. Потому что нужно правильно разграничить сервисы и закрепить за сервисной командой. При отсуствии опыта есть риск наделать либо слишком много сервисов, либо наоборот - неверно разграничить то, что есть.

Следует так же учитывать и остальные проблемы, которые связаны уже непосредственно с самой микросервисной архитектурой:

* Обеспечение безопасности - чем больше сервисов, тем сложнее обеспечить безопасное взаимодействие их друг с другом;
* Совместимость - опять же - чем больше сервисов, тем сложнее обеспечить прямую и обратную совместимость взаимодействия их друг с другом, нужно продумывать протоколы взаимодействия, методы, будет ли это API или что-то еще, но это должно работать для всех сервисов;
* Увеличение инфраструктуры и расходы, связанные с этим. Если ранее монолитное приложение могло быть запущено на одном сервере и компании было этого достаточно, то теперь потребуется несколько серверов для запуска нескольких экземпляров сервисов, балансировки нагрузки, отдельно - для мониторинга, аналитики и т.д. Это обязательно повлечет за собой увеличение расходов на инфраструктуру и на содержание команды OPS;
* Сложность самой технологии - в первую очередь это проблема для OPS, для них увеличится количество поддерживаемых технологий, усложнится ведение документации, постоянная актуализация документации.

<br />

Однако, и выигрыш от внедрения микросервисов будет существенным. Среди наиболее значимых плюсов можно выделить:

1. Независимое предоставление услуг разным сегментам рынка, например, бизнес-клиентам (b2b сегмент) и индивидуальным клиентам (b2c сегмент).
2. Ускорение разработки и в целом работы над разными сервисами. Независимость сервисов друг от друга дает возможность командам вести параллельную разработку своих сервисов, не ожидая пока одна команда закончит свою задачу и передаст работу следующей команде.
3. Легкая масштабируемость и управляемость. Микросервисы легко можно масштабировать между разными физическими или виртуальными серверами, управлять ими с помощью механизмов оркестрации, причем современные технологии позволяют делать это все автоматизированно.
4. Изоляция сервисов друг от друга позволяет сохранять жизнеспособность всей системы в целом. Отказ в одном сервисе не повлечет за собой отказ в работе всей системы.
5. Оптимальное распределение ресурсов, управление нагрузкой и отказоустойчивость. Так как микросервисы легко масштабируемы - это дает возможность более оптимально распределять нагрузку на них, выделять ресурсы физического оборудования. И даже выход из строя одного физического сервера в данном случае не повлечет за собой выход из строя всей системы - экземпляры микросервисов возможно будет запустить на другом сервере, причем тоже автоматически с использованием технологий оркестрации.
6. Ну и наверное самый главный плюс, который для бизнеса сейчас имеет ключевое значение, ускорение доставки приложения до конечного пользователя. Так как микросервисы ускоряют разработку и обновление, соотвественно ускоряется и выкладка каждого нового релиза, минимизируется время недоступности. В итоге конечный пользователь всегда получает самый актуальный релиз приложения в максимально короткие сроки. К чему и нужно стремиться, ведь это и есть сама цель внедрения микросервисов.